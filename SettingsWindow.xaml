<Window x:Class="WinIsland.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="topx 设置"
        Icon="ico.ico"
        Height="560" Width="860"
        MinHeight="520" MinWidth="820"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True"
        FontFamily="Bahnschrift"
        FontSize="13"
        MouseDown="Window_MouseDown">

    <Window.Resources>
        <!-- Palette -->
        <Color x:Key="Ink900">#14171C</Color>
        <Color x:Key="Ink800">#1B1F26</Color>
        <Color x:Key="Ink700">#222733</Color>
        <Color x:Key="Paper">#F6F4F0</Color>
        <Color x:Key="Card">#FFFFFF</Color>
        <Color x:Key="CardAlt">#F1F4F8</Color>
        <Color x:Key="Stroke">#D5DAE3</Color>
        <Color x:Key="Accent">#00A37A</Color>
        <Color x:Key="AccentDark">#00805F</Color>
        <Color x:Key="Warm">#FFB347</Color>
        <Color x:Key="TextMain">#1A1F2B</Color>
        <Color x:Key="TextSub">#5F6B7A</Color>
        <Color x:Key="NavText">#1A1F2B</Color>
        <Color x:Key="NavSub">#5F6B7A</Color>

        <LinearGradientBrush x:Key="WindowBgBrush" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#F7F3ED" Offset="0"/>
            <GradientStop Color="#E9EEF5" Offset="1"/>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="NavBgBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#F2F5FA" Offset="0"/>
            <GradientStop Color="#E5ECF5" Offset="1"/>
        </LinearGradientBrush>

        <SolidColorBrush x:Key="CardBgBrush" Color="{StaticResource Card}"/>
        <SolidColorBrush x:Key="CardAltBrush" Color="{StaticResource CardAlt}"/>
        <SolidColorBrush x:Key="StrokeBrush" Color="{StaticResource Stroke}"/>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource Accent}"/>
        <SolidColorBrush x:Key="AccentDarkBrush" Color="{StaticResource AccentDark}"/>
        <SolidColorBrush x:Key="TextBrush" Color="{StaticResource TextMain}"/>
        <SolidColorBrush x:Key="SecondaryTextBrush" Color="{StaticResource TextSub}"/>
        <SolidColorBrush x:Key="NavTextBrush" Color="{StaticResource NavText}"/>
        <SolidColorBrush x:Key="NavSubBrush" Color="{StaticResource NavSub}"/>

        <RadialGradientBrush x:Key="AccentGlowBrush" RadiusX="0.9" RadiusY="0.9">
            <GradientStop Color="#5500A37A" Offset="0"/>
            <GradientStop Color="#0000A37A" Offset="1"/>
        </RadialGradientBrush>

        <RadialGradientBrush x:Key="WarmGlowBrush" RadiusX="0.9" RadiusY="0.9">
            <GradientStop Color="#44FFB347" Offset="0"/>
            <GradientStop Color="#00FFB347" Offset="1"/>
        </RadialGradientBrush>

        <!-- Typography -->
        <Style x:Key="TitleTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="26"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        </Style>

        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <Style x:Key="CaptionStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <!-- Navigation -->
        <Style x:Key="NavItemStyle" TargetType="RadioButton">
            <Setter Property="Foreground" Value="{StaticResource NavTextBrush}"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="NavBorder" Background="Transparent" CornerRadius="8" Padding="10,8">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="NavBorder" Property="Background" Value="#E8EDF5"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="NavBorder" Property="Background" Value="#D5E2F1"/>
                                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Buttons -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="{StaticResource CardAltBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource StrokeBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="BtnBorder" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="BtnBorder" Property="Background" Value="#E8EEF5"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="BtnBorder" Property="Background" Value="#DDE6F1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TextBox -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource StrokeBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Toggle CheckBox -->
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid Margin="0,6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ContentPresenter Grid.Column="0" VerticalAlignment="Center"/>
                            <Border x:Name="Track" Grid.Column="1" Width="44" Height="22" CornerRadius="11" Background="{StaticResource CardAltBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1">
                                <Ellipse x:Name="Thumb" Width="18" Height="18" Fill="#8E98A7" HorizontalAlignment="Left" Margin="2,0,0,0"/>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Track" Property="Background" Value="{StaticResource AccentBrush}"/>
                                <Setter TargetName="Track" Property="BorderBrush" Value="{StaticResource AccentDarkBrush}"/>
                                <Setter TargetName="Thumb" Property="HorizontalAlignment" Value="Right"/>
                                <Setter TargetName="Thumb" Property="Fill" Value="White"/>
                                <Setter TargetName="Thumb" Property="Margin" Value="0,0,2,0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DatePicker Styling -->
        <Style TargetType="DatePickerTextBox">
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="SelectionBrush" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DatePickerTextBox">
                        <TextBox x:Name="PART_TextBox" Text="{Binding Path=SelectedDate, StringFormat='yyyy/MM/dd', RelativeSource={RelativeSource AncestorType={x:Type DatePicker}}}" Background="{TemplateBinding Background}" Foreground="{TemplateBinding Foreground}" BorderThickness="0" Padding="5,2" VerticalAlignment="Center" IsReadOnly="True" Cursor="Hand"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="DatePicker">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource StrokeBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
    </Window.Resources>

    <Border Background="{StaticResource WindowBgBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="16" Padding="18">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="24" ShadowDepth="0" Opacity="0.25"/>
        </Border.Effect>

        <Grid>
            <!-- Decorative glows -->
            <Grid IsHitTestVisible="False">
                <Ellipse Fill="{StaticResource AccentGlowBrush}" Width="420" Height="420" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-180,-200,0,0"/>
                <Ellipse Fill="{StaticResource WarmGlowBrush}" Width="360" Height="360" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,-120,-160,0"/>
            </Grid>

            <Grid Margin="6">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel>
                        <TextBlock Text="topx" Style="{StaticResource TitleTextStyle}"/>
                        <TextBlock Text="设置中心 · 更改自动保存" Style="{StaticResource CaptionStyle}" Margin="0,4,0,0"/>
                    </StackPanel>
                    <Button Grid.Column="1" Content="✕" Click="Cancel_Click" Background="Transparent" BorderThickness="0" Foreground="{StaticResource SecondaryTextBrush}" FontSize="16" Padding="6" VerticalAlignment="Top"/>
                </Grid>

                <!-- Content -->
                <Grid Grid.Row="1" Margin="0,16,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="190"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Navigation -->
                    <Border Grid.Column="0" Background="{StaticResource NavBgBrush}" CornerRadius="12" Padding="12">
                        <StackPanel>
                            <TextBlock Text="SECTIONS" Foreground="{StaticResource NavSubBrush}" FontSize="11" Margin="6,0,0,10"/>
                            <RadioButton x:Name="NavNotify" Content="通知" GroupName="NavGroup" IsChecked="True" Checked="Nav_Checked" Tag="PanelNotify" Style="{StaticResource NavItemStyle}"/>
                            <RadioButton x:Name="NavMedia" Content="媒体" GroupName="NavGroup" Checked="Nav_Checked" Tag="PanelMedia" Style="{StaticResource NavItemStyle}"/>
                            <RadioButton x:Name="NavAppearance" Content="外观" GroupName="NavGroup" Checked="Nav_Checked" Tag="PanelAppearance" Style="{StaticResource NavItemStyle}"/>
                            <RadioButton x:Name="NavSystem" Content="系统" GroupName="NavGroup" Checked="Nav_Checked" Tag="PanelSystem" Style="{StaticResource NavItemStyle}"/>
                            <RadioButton x:Name="NavHealth" Content="健康" GroupName="NavGroup" Checked="Nav_Checked" Tag="PanelHealth" Style="{StaticResource NavItemStyle}"/>
                            <RadioButton x:Name="NavTodo" Content="待办" GroupName="NavGroup" Checked="Nav_Checked" Tag="PanelTodo" Style="{StaticResource NavItemStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Pages -->
                    <Border Grid.Column="1" Background="{StaticResource CardBgBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="12" Padding="16" Margin="16,0,0,0">
                        <Grid>
                            <!-- 通知 -->
                            <ScrollViewer x:Name="PanelNotify" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <StackPanel>
                                    <TextBlock Text="通知" Style="{StaticResource SectionHeaderStyle}"/>
                                    <Border Background="{StaticResource CardAltBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="10" Padding="12">
                                        <StackPanel>
                                            <CheckBox x:Name="ChkBluetoothNotification" Content="蓝牙设备" Checked="AutoSave_Changed" Unchecked="AutoSave_Changed"/>
                                            <CheckBox x:Name="ChkUsbNotification" Content="USB 设备" Checked="AutoSave_Changed" Unchecked="AutoSave_Changed"/>
                                            <CheckBox x:Name="ChkMessageNotification" Content="微信 / QQ 消息" Checked="AutoSave_Changed" Unchecked="AutoSave_Changed"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>

                            <!-- 媒体 -->
                            <ScrollViewer x:Name="PanelMedia" Visibility="Collapsed" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <StackPanel>
                                    <TextBlock Text="媒体" Style="{StaticResource SectionHeaderStyle}"/>
                                    <Border Background="{StaticResource CardAltBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="10" Padding="12">
                                        <StackPanel>
                                            <CheckBox x:Name="ChkShowMediaPlayer" Content="显示媒体播放器" Checked="AutoSave_Changed" Unchecked="AutoSave_Changed"/>
                                            <CheckBox x:Name="ChkShowVisualizer" Content="显示音频可视化" Checked="AutoSave_Changed" Unchecked="AutoSave_Changed"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>

                            <!-- 外观 -->
                            <ScrollViewer x:Name="PanelAppearance" Visibility="Collapsed" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <StackPanel>
                                    <TextBlock Text="外观" Style="{StaticResource SectionHeaderStyle}"/>
                                    <Border Background="{StaticResource CardAltBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="10" Padding="12">
                                        <StackPanel>
                                            <TextBlock Text="灵动岛透明度" Style="{StaticResource CaptionStyle}" Margin="0,0,0,6"/>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <Slider x:Name="SldIslandOpacity" Minimum="0.2" Maximum="1" Value="1" TickFrequency="0.05" IsSnapToTickEnabled="True" ValueChanged="SldIslandOpacity_ValueChanged"/>
                                                <TextBlock x:Name="TxtIslandOpacityValue" Grid.Column="1" Text="100%" Foreground="{StaticResource TextBrush}" Margin="10,0,0,0" VerticalAlignment="Center" Width="50"/>
                                            </Grid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>

                            <!-- 系统 -->
                            <ScrollViewer x:Name="PanelSystem" Visibility="Collapsed" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <StackPanel>
                                    <TextBlock Text="系统" Style="{StaticResource SectionHeaderStyle}"/>
                                    <Border Background="{StaticResource CardAltBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="10" Padding="12">
                                        <StackPanel>
                                            <CheckBox x:Name="ChkStartWithWindows" Content="开机自启动" Checked="AutoSave_Changed" Unchecked="AutoSave_Changed"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>

                            <!-- 健康 -->
                            <ScrollViewer x:Name="PanelHealth" Visibility="Collapsed" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <StackPanel>
                                    <TextBlock Text="健康与专注" Style="{StaticResource SectionHeaderStyle}"/>
                                    <Border Background="{StaticResource CardAltBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="10" Padding="12">
                                        <StackPanel>
                                            <CheckBox x:Name="ChkDrinkWater" Content="喝水提醒" Checked="ChkDrinkWater_Checked" Unchecked="ChkDrinkWater_Unchecked"/>
                                            <StackPanel x:Name="PanelDrinkWaterSettings" Margin="0,8,0,0" Visibility="Collapsed">
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                                    <RadioButton x:Name="RbModeInterval" Content="间隔提醒" GroupName="DrinkMode" IsChecked="True" Foreground="{StaticResource TextBrush}" Margin="0,0,20,0" Checked="RbMode_Checked"/>
                                                    <RadioButton x:Name="RbModeCustom" Content="自定义时间" GroupName="DrinkMode" Foreground="{StaticResource TextBrush}" Checked="RbMode_Checked"/>
                                                </StackPanel>

                                                <Grid x:Name="PanelModeInterval">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                        <TextBlock Text="间隔 (分钟)" Style="{StaticResource CaptionStyle}" Margin="0,0,0,5"/>
                                                        <TextBox x:Name="TxtDrinkWaterInterval" Text="30" FontFamily="Cascadia Mono" LostFocus="AutoSave_LostFocus"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Column="1" Width="180">
                                                        <TextBlock Text="活动时间段" Style="{StaticResource CaptionStyle}" Margin="0,0,0,5"/>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>
                                                            <TextBox Grid.Column="0" x:Name="TxtDrinkStartTime" Text="09:00" FontFamily="Cascadia Mono" MaxLength="5" LostFocus="AutoSave_LostFocus"/>
                                                            <TextBlock Grid.Column="1" Text="-" Foreground="{StaticResource SecondaryTextBrush}" VerticalAlignment="Center" Margin="5,0"/>
                                                            <TextBox Grid.Column="2" x:Name="TxtDrinkEndTime" Text="22:00" FontFamily="Cascadia Mono" MaxLength="5" LostFocus="AutoSave_LostFocus"/>
                                                        </Grid>
                                                    </StackPanel>
                                                </Grid>

                                                <StackPanel x:Name="PanelModeCustom" Visibility="Collapsed">
                                                    <Grid Margin="0,0,0,10">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox x:Name="TxtCustomDrinkTime" Tag="HH:MM" MaxLength="5" FontFamily="Cascadia Mono" Margin="0,0,10,0"/>
                                                        <Button Grid.Column="1" Content="添加时间" Click="BtnAddCustomDrinkTime_Click"/>
                                                    </Grid>
                                                    <ItemsControl x:Name="ListCustomDrinkTimes">
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border Background="White" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="6" Margin="0,0,0,6" Padding="10,6">
                                                                    <Grid>
                                                                        <TextBlock Text="{Binding}" Foreground="{StaticResource TextBrush}" VerticalAlignment="Center"/>
                                                                        <Button Content="×" HorizontalAlignment="Right" Click="BtnDeleteCustomDrinkTime_Click" Tag="{Binding}" Background="Transparent" BorderThickness="0" Foreground="#D9534F" Padding="5,0"/>
                                                                    </Grid>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </StackPanel>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>

                            <!-- 待办 -->
                            <ScrollViewer x:Name="PanelTodo" Visibility="Collapsed" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <StackPanel>
                                    <TextBlock Text="待办事项" Style="{StaticResource SectionHeaderStyle}"/>
                                    <Border Background="{StaticResource CardAltBrush}" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="10" Padding="12">
                                        <StackPanel>
                                            <CheckBox x:Name="ChkTodo" Content="待办事项提醒" Checked="ChkTodo_Checked" Unchecked="ChkTodo_Unchecked"/>
                                            <StackPanel x:Name="PanelTodoSettings" Margin="0,8,0,0" Visibility="Collapsed">
                                                <Grid Margin="0,0,0,10">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="120"/>
                                                        <ColumnDefinition Width="80"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <DatePicker x:Name="DpTodoDate" Grid.Column="0" Margin="0,0,5,0" Foreground="Black"/>
                                                    <TextBox x:Name="TxtTodoTime" Grid.Column="1" Text="12:00" Margin="0,0,5,0" FontFamily="Cascadia Mono"/>
                                                    <TextBox x:Name="TxtTodoContent" Grid.Column="2" Margin="0,0,5,0"/>
                                                    <Button Grid.Column="3" Content="+" Click="BtnAddTodo_Click" Width="30"/>
                                                </Grid>

                                                <ItemsControl x:Name="ListTodo">
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Background="White" BorderBrush="{StaticResource StrokeBrush}" BorderThickness="1" CornerRadius="6" Margin="0,0,0,6" Padding="10,8">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBlock Grid.Column="0" Text="{Binding ReminderTime, StringFormat='MM/dd HH:mm'}" Foreground="{StaticResource AccentBrush}" FontSize="12" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                                                    <TextBlock Grid.Column="1" Text="{Binding Content}" Foreground="{StaticResource TextBrush}" TextTrimming="CharacterEllipsis" VerticalAlignment="Center"/>
                                                                    <Button Grid.Column="2" Content="×" Click="BtnDeleteTodo_Click" Tag="{Binding}" Background="Transparent" BorderThickness="0" Foreground="#D9534F" Padding="5,0"/>
                                                                </Grid>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>
